# SIGEC - Système Intégré de Gestion des Candidatures
# Configuration principale de l'application

springdoc.swagger-ui.path=/swagger-ui.html

spring.application.name=sigec
spring.profiles.active=${SPRING_PROFILES_ACTIVE:dev}

spring.datasource.url=${DB_URL:jdbc:postgresql://localhost:5432/gestion_inscription_clean}
spring.datasource.username=${DB_USERNAME:postgres}
spring.datasource.password=${DB_PASSWORD:darwin}
spring.datasource.driver-class-name=org.postgresql.Driver

spring.jpa.hibernate.ddl-auto=${JPA_DDL_AUTO:validate}
spring.jpa.database=postgresql
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.show-sql=${JPA_SHOW_SQL:false}
spring.jpa.properties.hibernate.format_sql=${JPA_FORMAT_SQL:false}

# JWT Configuration
gestin_inscription.app.jwtSecret=${JWT_SECRET:Z2VzdGluX2luc2NyaXB0aW9uX3NlY3JldF9rZXlfMjAyNF9zdXBlcl9zZWN1cmVfa2V5X2Zvcl9qd3RfdG9rZW5z}
gestin_inscription.app.jwtExpirationMs=${JWT_EXPIRATION:2592000000}

# mail config

spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=${MAIL_USERNAME:your-email@gmail.com}
spring.mail.password=${MAIL_PASSWORD:oarg lksl hicd fkvp}
spring.mail.properties.mail.mine.charset=UTF
spring.mail.properties.mail.smtp.writetimeout=10000
spring.mail.properties.mail.smtp.connectiontimeout=10000
spring.mail.properties.mail.smtp.timeout=10000
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.ssl.trust=smtp.gmail.com
spring.mail.verify.host=http://localhost:8086
spring.mail.from=noreply@sigec.cm

#sms twilio config

TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=

# WebSocket Configuration
# spring.websocket.allowed-origins=*

server.port=8086

# Planification des rappels
app.notification.reminder-time=09:00

#Admin credentials
app.admin.username=${ADMIN_USERNAME:super-admin}
app.admin.password=${ADMIN_PASSWORD:adminpass}
app.admin.email=${ADMIN_EMAIL:admin@example.com}
#DEBUGS config
logging.level.com.groupe.gestin_inscription.security=${LOG_LEVEL_SECURITY:WARN}
logging.level.org.springframework.security=${LOG_LEVEL_SPRING_SECURITY:WARN}
logging.level.com.groupe.gestin_inscription.security.OAuth2=${LOG_LEVEL_OAUTH2:WARN}
logging.level.com.groupe.gestin_inscription.services=${LOG_LEVEL_SERVICES:INFO}
logging.level.com.groupe.gestin_inscription.controller=${LOG_LEVEL_CONTROLLER:INFO}
logging.level.root=${LOG_LEVEL_ROOT:INFO}

#empty strings managing
spring.jackson.deserialization.accept-empty-string-as-null-object=true
spring.jackson.deserialization.fail-on-unknown-properties=false

# OAuth2 Configuration
# Configuration Google OAuth2 - Utiliser des variables d'environnement
spring.security.oauth2.client.registration.google.client-id=${GOOGLE_CLIENT_ID:your-google-client-id}
spring.security.oauth2.client.registration.google.client-secret=${GOOGLE_CLIENT_SECRET:your-google-client-secret}
spring.security.oauth2.client.registration.google.scope=openid,profile,email
spring.security.oauth2.client.registration.google.redirect-uri=http://localhost:8086/login/oauth2/code/google
spring.security.oauth2.client.registration.google.authorization-grant-type=authorization_code
spring.security.oauth2.client.registration.google.client-name=Google

# URLs du provider Google (automatiques)
spring.security.oauth2.client.provider.google.authorization-uri=https://accounts.google.com/o/oauth2/v2/auth
spring.security.oauth2.client.provider.google.token-uri=https://oauth2.googleapis.com/token
spring.security.oauth2.client.provider.google.user-info-uri=https://www.googleapis.com/oauth2/v2/userinfo
spring.security.oauth2.client.provider.google.user-name-attribute=email

# Configuration Microsoft OAuth2 - Non configuré (nécessite des identifiants Azure)
spring.security.oauth2.client.registration.microsoft.client-id=your-microsoft-client-id
spring.security.oauth2.client.registration.microsoft.client-secret=your-microsoft-client-secret
spring.security.oauth2.client.registration.microsoft.scope=openid,profile,email
spring.security.oauth2.client.registration.microsoft.redirect-uri=http://localhost:8086/oauth2/callback/microsoft
spring.security.oauth2.client.registration.microsoft.authorization-grant-type=authorization_code
spring.security.oauth2.client.registration.microsoft.client-name=Microsoft

spring.security.oauth2.client.provider.microsoft.authorization-uri=https://login.microsoftonline.com/common/oauth2/v2.0/authorize
spring.security.oauth2.client.provider.microsoft.token-uri=https://login.microsoftonline.com/common/oauth2/v2.0/token
spring.security.oauth2.client.provider.microsoft.user-info-uri=https://graph.microsoft.com/v1.0/me
spring.security.oauth2.client.provider.microsoft.user-name-attribute=id

# reCAPTCHA Configuration
recaptcha.site-key=your-recaptcha-site-key
recaptcha.secret-key=your-recaptcha-secret-key
recaptcha.verify-url=https://www.google.com/recaptcha/api/siteverify

# Configuration de stockage sécurisé
app.storage.secure-path=${SECURE_STORAGE_PATH:/var/sigec/secure-storage}

# Configuration de validation des documents
app.ocr.enabled=false
app.face-detection.enabled=false

# Configuration des tâches programmées
spring.task.scheduling.pool.size=5
spring.task.execution.pool.core-size=10
spring.task.execution.pool.max-size=20

# Configuration de sécurité pour la production
server.error.include-stacktrace=never
server.error.include-message=never
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=when-authorized

# Configuration des uploads de fichiers
spring.servlet.multipart.max-file-size=5MB
spring.servlet.multipart.max-request-size=25MB

# Configuration Email avancée
app.mail.enabled=true
app.mail.from=noreply@sigec.com

# Configuration CORS
app.cors.allowed-origins=${CORS_ALLOWED_ORIGINS:https://yourdomain.com}

# Configuration du mode développement OAuth2
app.oauth2.development-mode=${OAUTH2_DEV_MODE:false}
app.oauth2.test-endpoints-enabled=${OAUTH2_TEST_ENABLED:false}

# URL du frontend pour les redirections OAuth2
app.frontend.url=${FRONTEND_URL:http://localhost:4200}